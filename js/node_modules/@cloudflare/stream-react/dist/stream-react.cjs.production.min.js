"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),o=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=function(){if("undefined"!=typeof window)return window.Stream};function r(){var e=t.useState(n),o=e[0],r=e[1];return t.useEffect((function(){if(!o){var e=document.querySelector("script[src='https://embed.videodelivery.net/embed/sdk.latest.js']"),t=null!=e?e:document.createElement("script");t.addEventListener("load",(function(){r(n)})),e||(t.src="https://embed.videodelivery.net/embed/sdk.latest.js",document.head.appendChild(t))}}),[o]),o}function a(e,o,n){t.useEffect((function(){o.current&&(o.current[e]=n)}),[e,n,o])}function i(e,o,n){void 0===n&&(n=d),t.useEffect((function(){if(o.current){var t=o.current;return t.addEventListener(e,n),function(){return t.removeEventListener(e,n)}}}),[n,e,o])}var d=function(){},u={position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},l=function(e){var n=e.children,r=e.responsive,a=e.className,i=e.videoDimensions,d=i.videoHeight,u=i.videoWidth,l=t.useMemo((function(){return{position:"relative",paddingTop:u>0?d/u*100+"%":void 0}}),[u,d]);return o.createElement("div",{className:a,style:r?l:void 0},n)},s=function(e){var r=e.src,d=e.adUrl,s=e.controls,c=void 0!==s&&s,p=e.muted,m=void 0!==p&&p,v=e.autoplay,f=void 0!==v&&v,h=e.loop,g=void 0!==h&&h,y=e.preload,S=void 0===y?"metadata":y,E=e.defaultTextTrack,T=e.height,b=e.width,k=e.poster,w=e.currentTime,C=void 0===w?0:w,R=e.volume,x=void 0===R?1:R,P=e.streamRef,U=e.responsive,W=void 0===U||U,j=e.className,D=e.onAbort,H=e.onCanPlay,L=e.onCanPlayThrough,A=e.onDurationChange,M=e.onEnded,N=e.onError,I=e.onLoadedData,q=e.onLoadedMetaData,z=e.onLoadStart,B=e.onPause,O=e.onPlay,_=e.onPlaying,F=e.onProgress,K=e.onRateChange,V=e.onResize,G=e.onSeeked,J=e.onSeeking,Q=e.onStalled,X=e.onSuspend,Y=e.onTimeUpdate,Z=e.onVolumeChange,$=e.onWaiting,ee=e.onStreamAdStart,te=e.onStreamAdEnd,oe=e.onStreamAdTimeout,ne=t.useRef(),re=null!=P?P:ne,ae=t.useState({videoHeight:0,videoWidth:0}),ie=ae[0],de=ae[1],ue=t.useRef(null),le=function(e,o){var n=o.muted,r=o.preload,a=o.loop,i=o.autoplay,d=o.controls,u=o.poster,l=o.adUrl,s=o.defaultTextTrack,c=[u&&"poster="+encodeURIComponent(u),l&&"ad-url="+encodeURIComponent(l),s&&"defaultTextTrack="+encodeURIComponent(s),n&&"muted=true",r&&"preload="+r,a&&"loop=true",i&&"autoplay=true",!d&&"controls=false"].filter(Boolean).join("&");return t.useMemo((function(){return"https://iframe.videodelivery.net/"+e+"?"+c}),[])}(r,{muted:m,preload:S,loop:g,autoplay:f,controls:c,poster:k,adUrl:d,defaultTextTrack:E});return a("muted",re,m),a("controls",re,c),a("src",re,r),a("autoplay",re,f),a("currentTime",re,C),a("loop",re,g),a("preload",re,S),a("volume",re,x),t.useEffect((function(){var e=n();if(ue.current&&e){var t=e(ue.current);re.current=t;var o=t.videoHeight,r=t.videoWidth;o&&r&&de({videoHeight:o,videoWidth:r})}}),[]),i("abort",re,D),i("canplay",re,H),i("canplaythrough",re,L),i("durationchange",re,A),i("ended",re,M),i("error",re,N),i("loadeddata",re,I),i("loadedmetadata",re,q),i("loadstart",re,z),i("pause",re,B),i("play",re,O),i("playing",re,_),i("progress",re,F),i("ratechange",re,K),i("seeked",re,G),i("seeking",re,J),i("stalled",re,Q),i("suspend",re,X),i("timeupdate",re,Y),i("volumechange",re,Z),i("waiting",re,$),i("stream-adstart",re,ee),i("stream-adend",re,te),i("stream-adtimeout",re,oe),i("resize",re,(function(){if(re.current){var e=re.current;de({videoHeight:e.videoHeight,videoWidth:e.videoWidth}),V&&V()}})),o.createElement(l,{className:j,responsive:W,videoDimensions:ie},o.createElement("iframe",{ref:ue,src:le,style:W?u:void 0,frameBorder:0,height:T,width:b,allow:"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;",allowFullScreen:!0}))};exports.Stream=function(e){return r()?o.createElement(s,Object.assign({},e)):null},exports.useStreamSDK=r;
//# sourceMappingURL=stream-react.cjs.production.min.js.map
